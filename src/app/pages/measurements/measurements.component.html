<main fxLayout="column" fxLayoutGap="8px" fxFill>
    <header fxFlex="none">
        <h1>Mediciones Telemetría</h1>
    </header>
    <div fxFlex="none">
        <h2>
            Filtrar por fechas
        </h2>
        <div fxLayout="row">
            <mat-form-field appearance="outline">
                <mat-label>Ingresa un rango de fechas</mat-label>
                <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
                    <input matStartDate formControlName="start" placeholder="Start date">
                    <input matEndDate formControlName="end" placeholder="End date">
                </mat-date-range-input>
                <mat-hint>MM/DD/YYYY – MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-date-range-picker #picker></mat-date-range-picker>
                <mat-error *ngIf="range.controls.start.hasError('matStartDateInvalid')">
                    Fecha de inicio invalida
                </mat-error>
                <mat-error *ngIf="range.controls.end.hasError('matEndDateInvalid')">
                    Fecha final invalida
                </mat-error>
            </mat-form-field>
        </div>
        <button *ngIf="!rangeParams" mat-stroked-button (click)="filter()">Filtrar</button>
        <button *ngIf="rangeParams" mat-stroked-button (click)="clearFilter()">Limpiar</button>
    </div>
    <div fxFlex>
        <table mat-table [dataSource]="measurementsDatasource">

            <ng-container matColumnDef="ConnectionDeviceId">
                <th mat-header-cell *matHeaderCellDef> ConnectionDeviceId </th>
                <td mat-cell *matCellDef="let element"> {{element.connectionDeviceId}} </td>
            </ng-container>

            <ng-container matColumnDef="EventProcessedUtcTime">
                <th mat-header-cell *matHeaderCellDef> EventProcessedUtcTime </th>
                <td mat-cell *matCellDef="let element"> {{element.eventProcessedUtcTime}} </td>
            </ng-container>

            <ng-container matColumnDef="Hefesto_Id">
                <th mat-header-cell *matHeaderCellDef> Hefesto_Id </th>
                <td mat-cell *matCellDef="let element"> {{element.hefesto_Id}} </td>
            </ng-container>

            <ng-container matColumnDef="Timestamp">
                <th mat-header-cell *matHeaderCellDef> Timestamp </th>
                <td mat-cell *matCellDef="let element"> {{element.timestamp}} </td>
            </ng-container>

            <ng-container matColumnDef="VarName">
                <th mat-header-cell *matHeaderCellDef> VarName </th>
                <td mat-cell *matCellDef="let element"> {{element.varName}} </td>
            </ng-container>

            <ng-container matColumnDef="Value">
                <th mat-header-cell *matHeaderCellDef> Value </th>
                <td mat-cell *matCellDef="let element"> {{element.value}} </td>
            </ng-container>

            <ng-container matColumnDef="Plugin">
                <th mat-header-cell *matHeaderCellDef> Plugin </th>
                <td mat-cell *matCellDef="let element"> {{element.plugin}} </td>
            </ng-container>

            <ng-container matColumnDef="Request">
                <th mat-header-cell *matHeaderCellDef> Request </th>
                <td mat-cell *matCellDef="let element"> {{element.request}} </td>
            </ng-container>

            <ng-container matColumnDef="VarName1">
                <th mat-header-cell *matHeaderCellDef> VarName1 </th>
                <td mat-cell *matCellDef="let element"> {{element.varName1}} </td>
            </ng-container>

            <ng-container matColumnDef="Device">
                <th mat-header-cell *matHeaderCellDef> Device </th>
                <td mat-cell *matCellDef="let element"> {{element.device}} </td>
            </ng-container>


            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>


    </div>
</main>
